<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Reading Worksheet</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons for aesthetic buttons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Styles from reading style.css */
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden;
            background-color: #f8f9fa;
        }
        .container {
            display: flex;
            height: 100vh;
            width: 100%;
        }
        .left, .right {
            padding: 30px;
            overflow-y: auto;
            border-radius: 8px;
        }
        .left {
            width: 50%;
            background-color: #ffffff;
            border-right: 2px solid #dee2e6;
            box-shadow: inset -5px 0 5px -5px #dee2e6;
            line-height: 1.6;
            padding-left: 70px; /* Added padding to indent the reading passage */
        }
        .right {
            width: 50%;
            background-color: #fdfdfd;
        }
        h2 {
            color: #2c3e50;
            font-size: 1.75em;
            margin-bottom: 15px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        h3 {
            color: #2c3e50;
            font-size: 1.4em;
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        p, li {
            font-size: 1.05em;
            color: #333;
        }
        input[type="text"] {
            width: calc(100% - 12px); /* Default width for text inputs */
            padding: 6px;
            font-size: 0.95em;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        /* Style for new dropdowns */
        select.short-select {
            width: 80px; /* Adjust width as needed */
            padding: 6px;
            font-size: 0.95em;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        /* New style for shorter text inputs in note completion */
        input.note-completion-input {
            width: 150px; /* Shorter width for these specific inputs */
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 16px;
            font-size: 1em;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            margin-top: 10px;
            margin-right: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button:hover {
            background-color: #45a049;
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        .explanation {
            background-color: #eef5e8;
            padding: 10px;
            margin-top: 8px;
            border-left: 4px solid #4CAF50;
            font-size: 0.95em;
            color: #333;
            border-radius: 4px;
        }
        .incorrect-answer {
            background-color: #fcebeb;
            border-left: 4px solid #e74c3c;
        }
        .correct-answer {
            background-color: #e8f5ee;
            border-left: 4px solid #28a745;
        }
        .resizer {
            width: 6px;
            cursor: col-resize;
            background-color: #ced4da;
            transition: background-color 0.3s;
        }
        .resizer:hover {
            background-color: #adb5bd;
        }
        .highlighted {
            background-color: yellow;
        }
        .floating-tools {
            position: fixed;
            top: 100px;
            left: 10px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            z-index: 1000;
            background-color: rgba(255,255,255,0.7);
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transition: opacity 0.3s ease;
        }
        .floating-tools button {
            background-color: #007bff;
            padding: 8px 12px;
            font-size: 0.9em;
            margin: 0;
            display: flex; /* Enable flexbox for icon and text alignment */
            align-items: center; /* Vertically center icon and text */
            justify-content: center; /* Horizontally center content */
            gap: 5px; /* Space between icon and text (if text is present) */
        }
        .floating-tools button svg {
            width: 18px; /* Adjust icon size */
            height: 18px;
            color: white; /* Icon color */
        }
        .floating-tools button:hover {
            background-color: #0056b3;
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        #reading-timer {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ffc107;
            color: #000;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 1000;
        }
        .question-item {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        /* Indent question text */
        .question-item p {
            margin-bottom: 8px;
            padding-left: 15px; /* Indent the question text */
        }
        .question-item select, .question-item input[type="text"] {
            margin-bottom: 0;
            width: calc(100% - 20px);
        }
        .note-completion-item {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        /* Indent note completion text */
        .note-completion-item p {
            margin-bottom: 8px;
            padding-left: 15px; /* Indent the question text */
        }
        .note-completion-item input {
            width: calc(100% - 20px);
        }

        /* Styles for new True/False/Not Given buttons */
        .tfng-buttons {
            display: flex;
            gap: 8px; /* Space between buttons */
            margin-top: 5px;
            padding-left: 15px; /* Align buttons with indented text */
        }
        .tfng-buttons button {
            flex: 1; /* Distribute space evenly */
            padding: 8px 12px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            color: #333;
            font-size: 0.95em;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, box-shadow 0.2s;
            margin: 0; /* Override previous button margin */
            box-shadow: none; /* No shadow by default */
        }
        .tfng-buttons button:hover {
            background-color: #e0e0e0;
            border-color: #999;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .tfng-buttons button.selected {
            background-color: #007bff; /* Blue for selected */
            color: white;
            border-color: #007bff;
            box-shadow: 0 2px 5px rgba(0,123,255,0.3);
        }
        .tfng-buttons button.selected:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        /* Modal for alerts */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        /* Styles for Multiple Choice Questions (single answer - radio buttons) */
        .mcq-options {
            margin-top: 5px;
        }
        .mcq-options label {
            display: flex; /* Use flexbox to align checkbox and text */
            align-items: center; /* Vertically center checkbox and text */
            margin-bottom: 8px; /* Slightly more space between options */
            cursor: pointer;
            padding-left: 15px; /* Indent the label content */
        }
        .mcq-options input[type="radio"], .mcq-options input[type="checkbox"] {
            margin-right: 8px; /* Space between input and text */
        }

        /* Navigation buttons style */
        .passage-navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ddd;
        }
        .passage-navigation .nav-button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: none;
            cursor: pointer;
        }
        .passage-navigation .nav-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        .passage-navigation .nav-button.selected {
            background-color: #28a745; /* Green for selected */
            box-shadow: 0 4px 10px rgba(40,167,69,0.3);
            transform: translateY(-1px);
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- Reading Passage Section -->
        <div class="left" id="reading-passage-container">
            <div id="passage1-content" class="passage-content">
                <h2>READING PASSAGE 1</h2>
                <h3>How tennis rackets have changed</h3>
                <p>In 2016, the British professional tennis player Andy Murray was ranked as the world's number one. It was an incredible achievement by any standard made even more remarkable by the fact that he did this during a period considered to be one of the strongest in the sport's history, competing against the likes of Rafael Nadal, Roger Federer and Novak Djokovic, to name just a few. Yet five years previously, he had been regarded as a talented outsider who entered but never won the major tournaments.</p>
                <p>Of the changes that account for this transformation, one was visible and widely publicised: in 2011, Murray invited former number one player Ivan Lendl onto his coaching team a valuable addition that had a visible impact on the player's playing style. Another change was so subtle as to pass more or less unnoticed. Like many players, Murray has long preferred a racket that consists of two types of string: one for the mains (verticals) and another for the crosses (horizontals). While he continued to use natural string in the crosses, in 2012 he switched to a synthetic string for the mains. A small change, perhaps, but its importance should not be underestimated.</p>
                <p>The modification that Murray made is just one of a number of options available to players looking to tweak their rackets in order to improve their games. 'Touring professionals have their rackets customised to their specific needs,' says Colin Triplow, a UK-based professional racket stringer. 'It's a highly important part of performance maximisation.' Consequently, the specific rackets used by the world's elite are not actually readily available to the public; rather, each racket is individually made to suit the player who uses it. Take the US professional tennis players Mike and Bob Bryan, for example: 'We're very particular with our racket specifications,' they say. 'All our rackets are sent from our manufacturer to Tampa, Florida, where our frames go through a thorough customisation process.' They explain how they have adjusted not only racket length, but even experimented with different kinds of paint. The rackets they use now weigh more than the average model and also have a denser string pattern (i.e. more crosses and mains).</p>
                <p>The primary reason for these modifications is simple: as the line between winning and losing becomes thinner and thinner, even these slight changes become more and more important. As a result, players and their teams are becoming increasingly creative with the modifications to their rackets as they look to maximise their competitive advantage.</p>
                <p>Racket modifications mainly date back to the 1970s, when the amateur German tennis player Werner Fischer started playing with the so-called spaghetti-strung racket. It created a string bed that generated so much topspin that it was quickly banned by the International Tennis Federation. However, within a decade or two, racket modification became a regularity. Today it is, in many ways, an. aspect of the game that is equal in significance to nutrition or training.</p>
                <p>Modifications can be divided into two categories: those to the string bed and those to the racket frame. The former is far more common than the latter: the choice of the strings and the tension with which they are installed is something that nearly all professional players experiment with. They will continually change it depending on various factors including the court surface, climatic conditions, and game styles. Some will even change it depending on how they feel at the time.</p>
                <p>At one time, all tennis rackets were strung with natural gut made from the outer layer of sheep or cow intestines. This all changed in the early 1990s with the development of synthetic strings that were cheaper and more durable. They are made from three materials: nylon (relatively durable and affordable), Kevlar (too stiff to be used alone) or co-polyester (polyester combined with additives that enhance its performance). Even so, many professional players continue to use a 'hybrid set-up', where a combination of both synthetic and natural strings are used.</p>
                <p>Of the synthetics, co-polyester is by far the most widely used. It's a perfect fit for the style of tennis now played, where players tend to battle it out from the back of the court rather than coming to the net. Studies indicate that the average spin from a co-polyester string is 25% greater than that from natural string or other synthetics. In a sense, the development of co-polyester strings has revolutionised the game.</p>
                <p>However, many players go beyond these basic adjustments to the strings and make changes to the racket frame itself. For example, much of the serving power of US professional player Pete Sampras was attributed to the addition of four to five lead weights onto his rackets, and today many professionals have the weight adjusted during the manufacturing process.</p>
                <p>Other changes to the frame involve the handle. Players have individual preferences for the shape of the handle and some will have the handle of one racket moulded onto the frame of a different racket. Other players make different changes. The professional Portuguese player Gonçalo Oliveira replaced the original grips of his rackets with something thinner because they had previously felt uncomfortable to hold.</p>
                <p>Racket customisation and modification has pushed the standards of the game to greater levels that few could have anticipated in the days of natural strings and heavy, wooden frames, and it's exciting to see what further developments there will be in the future.</p>
            </div>

            <div id="passage2-content" class="passage-content" style="display:none;">
                <h2>READING PASSAGE 2</h2>
                <h3>The pirates of the ancient Mediterranean</h3>
                <p>In the first and second millennia BCE, pirates sailed around the Mediterranean, attacking ships and avoiding pursuers</p>
                <p><strong>A</strong> When one mentions pirates, an image springs to most people's minds of a crew of misfits, daredevils and adventurers in command of a tall sailing ship in the Caribbean Sea. Yet from the first to the third millennium BCE, thousands of years before these swashbucklers began spreading fear across the Caribbean, pirates prowled the Mediterranean, raiding merchant ships and threatening vital trade routes. However, despite all efforts and the might of various ancient states, piracy could not be stopped. The situation remained unchanged for thousands of years. Only when the pirates directly threatened the interests of ancient Rome did the Roman Republic organise a massive fleet to eliminate piracy. Under the command of the Roman general Pompey, Rome eradicated piracy, transforming the Mediterranean into 'Mare Nostrum' (Our Sea).</p>
                <p><strong>B</strong> Although piracy in the Mediterranean is first recorded in ancient Egypt during the reign of Pharaoh Amenhotep III (c 1390-1353 BCE), it is reasonable to assume it predated this powerful civilisation. This is partly due to the great importance the Mediterranean held at this time, and partly due to its geography. While the Mediterranean region is predominantly fertile, some parts are rugged and hilly, even mountainous. In the ancient times, the inhabitants of these areas relied heavily on marine resources, including fish and salt. Most had their own boats, possessed good seafaring skills, and unsurpassed knowledge of the local coastline and sailing routes. Thus, it is not surprising that during hardships, these men turned to piracy. Geography itself further benefited the pirates, with the numerous coves along the coast providing places for them to hide their boats and strike undetected. Before the invention of ocean-going caravels* in the 15th century, ships could not easily cross long distances over open water. Thus, in the ancient world most were restricted to a few wellknown navigable routes that followed the coastline. Caught in a trap, a slow merchant ship laden with goods had no other option but to surrender. In addition, knowledge of the local area helped the pirates to avoid retaliation once a state fleet arrived.</p>
                <p><strong>C</strong> One should also add that it was not unknown in the first and second millennia BCE for governments to resort to pirates' services, especially during wartime, employing their skills and numbers against their opponents. A pirate fleet would serve in the first wave of attack, preparing the way for the navy. Some of the regions were known for providing safe harbours to pirates, who, in return, boosted the local economy.
                caravel: a small, highly manoeuvrable sailing ship developed by the Portuguese</p>
                <p><strong>D</strong> The first known record of a named group of Mediterranean pirates, made during the rule of ancient Egyptian Pharaoh Akhenaten (c 1353-1336 BCE), was in the Amarna Letters. These were extracts of diplomatic correspondence between the pharaoh and his allies, and covered many pressing issues, including piracy. It seems the pharaoh was troubled by two distinct pirate groups, the Lukka and the Sherden. Despite the Egyptian fleet's best efforts, the pirates continued to cause substantial disruption to regional commerce. In the letters, the king of Alashiya (modern Cyprus) rejected Akhenaten's claims of a connection with the Lukka (based in modern-day Turkey). The king assured Akhenaten he was prepared to punish any of his subjects involved in piracy.</p>
                <p><strong>E</strong> The ancient Greek world's experience of piracy was different from that of Egyptian rulers. While Egypt's power was land-based, the ancient Greeks relied on the Mediterranean in almost all aspects of life, from trade to warfare. Interestingly, in his works the Iliad and the Odyssey, the ancient Greek writer Homer not only condones, but praises the lifestyle and actions of pirates. The opinion remained unchanged in the following centuries. The ancient Greek historian Thucydides, for instance, glorified pirates' daring attacks on ships or even cities. For Greeks, piracy was a part of everyday life. Even high-ranking members of the state were not beyond engaging in such activities. According to the Greek orator Demosthenes, in 355 BCE, Athenian ambassadors made a detour from their official travel to capture a ship sailing from Egypt, taking the wealth found onboard for themselves! The Greeks' liberal approach towards piracy does not mean they always tolerated it, but attempts to curtail piracy were hampered by the large number of pirates operating in the Mediterranean.</p>
                <p><strong>F</strong> The rising power of ancient Rome required the Roman Republic to deal with piracy in the Mediterranean. While piracy was a serious issue for the Republic, Rome profited greatly from its existence. Pirate raids provided a steady source of slaves, essential for Rome's agriculture and mining industries. But this arrangement could work only while the pirates left Roman interests alone. Pirate attacks on grain ships, which were essential to Roman citizens, led to angry voices in the Senate, demanding punishment of the culprits. Rome, however, did nothing, further encouraging piracy. By the 1st century BCE, emboldened pirates kidnapped prominent Roman dignitaries, asking for a large ransom to be paid. Their most famous hostage was none other than Julius Caesar, captured in 75 BCE.</p>
                <p><strong>G</strong> By now, Rome was well aware that pirates had outlived their usefulness. The time had come for concerted action. In 67 BCE, a new law granted Pompey vast funds to combat the Mediterranean menace. Taking personal command, Pompey divided the entire Mediterranean into 13 districts, assigning a fleet and commander to each. After cleansing one district of pirates, the fleet would join another in the next district. The process continued until the entire Mediterranean was free of pirates. Although thousands of pirates died at the hands of Pompey's troops, as a long-term solution to the problem, many more were offered land in fertile areas located far from the sea. Instead of a maritime menace, Rome got productive farmers that further boosted its economy.</p>
            </div>

            <div id="passage3-content" class="passage-content" style="display:none;">
                <h2>READING PASSAGE 3</h2>
                <h3>The persistence and peril of misinformation</h3>
                <p>Brian Southwell looks at how human brains verify information and discusses some of the challenges of battling widespread falsehoods</p>
                <p>Misinformation - both deliberately promoted and accidentally shared - is perhaps an inevitable part of the world in which we live, but it is not a new problem. People likely have lied to one another for roughly as long as verbal communication has existed. Deceiving others can offer an apparent opportunity to gain strategic advantage, to motivate others to action, or even to protect interpersonal bonds. Moreover, people inadvertently have been sharing inaccurate information with one another for thousands of years.</p>
                <p>However, we currently live in an era in which technology enables information to reach large audiences distributed across the globe, and and thus the potential for immediate and widespread effects from misinformation now looms larger than in the past. Yet the means to correct misinformation might, over time, be found in those same patterns of mass communication and of the facilitated spread of information.</p>
                <p>The main worry regarding misinformation is its potential to unduly influence attitudes and behavior, leading people to think and act differently than they would if they were correctly informed, as suggested by the research teams of Stephan Lewandowsky of the University of Bristol and Elizabeth Marsh of Duke University, among others. In other words, we worry that misinformation might lead people to hold misperceptions (or false beliefs) and that these misperceptions, especially when they occur among large groups of people, may have detrimental, downstream consequences for health, social harmony, and the political climate.</p>
                <p>At least three observations related to misinformation in the contemporary mass-media environment warrant the attention of researchers, policy makers, and really everyone who watches television, listens to the radio, or reads information online. First of all, people who encounter misinformation tend to believe it, at least initially. Secondly, electronic and print media often do not block many types of misinformation before it appears in content available to large audiences. Thirdly, countering misinformation once it has enjoyed wide exposure can be a resource-intensive effort.</p>
                <p>Knowing what happens when people initially encounter misinformation holds tremendous importance for estimating the potential for subsequent problems. Although it is fairly routine for individuals to come across information that is false, the question of exactly how - and when - we mentally label information as true or false has garnered philosophical debate. The dilemma is neatly summarized by a contrast between how the 17th-century philosophers René Descartes and Baruch Spinoza described human information engagement, with conflicting predictions that only recently have been empirically tested in robust ways. Descartes argued that a person only accepts or rejects information after considering its truth or falsehood; Spinoza argued that people accept all encountered information (or misinformation) by default and then subsequently verify or reject it through a separate cognitive process. In recent decades, empirical evidence from the research teams of Erik Asp of the University of Chicago and Daniel Gilbert at Harvard University, among others, has supported Spinoza's account: people appear to encode all new information as if it were true, even if only momentarily, and later tag the information as being either true or false, a pattern that seems consistent with the observation that mental resources for skepticism physically reside in a different part of the brain than the resources used in perceiving and encoding.</p>
                <p>What about our second observation that misinformation often can appear in electronic or print media without being preemptively blocked? In support of this, one might consider the nature of regulatory structures in the United States: regulatory agencies here tend to focus on post hoc detection of broadcast information. Organizations such as the Food and Drug Administration (FDA) offer considerable monitoring and notification functions, but these roles typically do not involve preemptive censoring. The FDA oversees direct-to-consumer prescription drug advertising, for example, and has developed mechanisms such as the 'Bad Ad' program, through which people can report advertising in apparent violation of FDA guidelines on drug risks. Such programs, although laudable and useful, do not keep false advertising off the airwaves. In addition, even misinformation that is successfully corrected can continue to affect attitudes.</p>
                <p>This leads us to our third observation: a campaign to correct misinformation, even if rhetorically compelling, requires resources and planning to accomplish necessary reach and frequency. For corrective campaigns to be persuasive, audiences need to be able to comprehend them, which requires either effort to frame messages in ways that are accessible or effort to educate and sensitize audiences to the possibility of misinformation. That some audiences might be unaware of the potential for misinformation also suggests the utility of media literacy efforts as early as elementary school. Even with journalists and scholars pointing to the phenomenon of 'fake news', people do not distinguish between demonstrably false stories and those based in fact when scanning and processing written information.</p>
                <p>We live at a time when widespread misinformation is common. Yet at this time many people also are passionately developing potential solutions and remedies. The journey forward undoubtedly will be a long and arduous one. Future remedies will require not only continued theoretical consideration but also the development and maintenance of consistent monitoring tools - and a recognition among fellow members of society that claims which find prominence in the media that are insufficiently based in scientific consensus and social reality should be countered. Misinformation arises as a result of human fallibility and human information needs. To overcome the worst effects of the phenomenon, we will need coordinated efforts over time, rather than any singular one-time panacea we could hope to offer.</p>
            </div>
        </div>

        <!-- Resizer Bar -->
        <div class="resizer" id="resizer"></div>

        <!-- Questions Section -->
        <div class="right" id="questions-section">
            <div class="passage-navigation">
                <button id="nav-passage1" class="nav-button">Passage 1</button>
                <button id="nav-passage2" class="nav-button">Passage 2</button>
                <button id="nav-passage3" class="nav-button">Passage 3</button>
            </div>

            <div id="questions-passage1" class="questions-group">
                <h2>Questions 1-7</h2>
                <p>Do the following statements agree with the information given in Reading Passage 1?</p>
                <p>In boxes 1-7 on your answer sheet, write</p>
                <p><strong>TRUE</strong> if the statement agrees with the information</p>
                <p><strong>FALSE</strong> if the statement contradicts the information</p>
                <p><strong>NOT GIVEN</strong> if there is no information on this</p>

                <div class="question-item" id="q1">
                    <p>1. People had expected Andy Murray to become the world's top tennis player for at least five years before 2016.</p>
                    <div class="tfng-buttons" id="tfng-buttons-1">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp1" style="display:none;"></div>
                </div>

                <div class="question-item" id="q2">
                    <p>2. The change that Andy Murray made to his rackets attracted a lot of attention.</p>
                    <div class="tfng-buttons" id="tfng-buttons-2">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp2" style="display:none;"></div>
                </div>

                <div class="question-item" id="q3">
                    <p>3. Most of the world's top players take a professional racket stringer on tour with them.</p>
                    <div class="tfng-buttons" id="tfng-buttons-3">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp3" style="display:none;"></div>
                </div>

                <div class="question-item" id="q4">
                    <p>4. Mike and Bob Bryan use rackets that are light in comparison to the majority of rackets.</p>
                    <div class="tfng-buttons" id="tfng-buttons-4">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp4" style="display:none;"></div>
                </div>

                <div class="question-item" id="q5">
                    <p>5. Werner Fischer played with a spaghetti-strung racket that he designed himself.</p>
                    <div class="tfng-buttons" id="tfng-buttons-5">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp5" style="display:none;"></div>
                </div>

                <div class="question-item" id="q6">
                    <p>6. The weather can affect how professional players adjust the strings on their rackets.</p>
                    <div class="tfng-buttons" id="tfng-buttons-6">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp6" style="display:none;"></div>
                </div>

                <div class="question-item" id="q7">
                    <p>7. It was believed that the change Pete Sampras made to his rackets contributed to his strong serve.</p>
                    <div class="tfng-buttons" id="tfng-buttons-7">
                        <button data-value="TRUE">TRUE</button>
                        <button data-value="FALSE">FALSE</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp7" style="display:none;"></div>
                </div>
                <button onclick="checkTFNGAswers(1, 7, 'passage1')">Check Answers (1-7)</button>
                <button onclick="resetTFNGAswers(1, 7)">Reset (1-7)</button>


                <h2>Questions 8-13</h2>
                <p>Complete the notes below.</p>
                <p>Choose ONE WORD ONLY from the passage for each answer.</p>
                <p>Write your answers in boxes 8-13 on your answer sheet.</p>

                <h3>The tennis racket and how it has changed</h3>
                <div class="note-completion-item" id="q8">
                    <p>• Mike and Bob Bryan made changes to the types of <input type="text" id="answer8" class="note-completion-input" placeholder="Enter word"> used on their racket frames.</p>
                    <div class="explanation" id="exp8" style="display:none;"></div>
                </div>

                <div class="note-completion-item" id="q9">
                    <p>• Players were not allowed to use the spaghetti-strung racket because of the amount of <input type="text" id="answer9" class="note-completion-input" placeholder="Enter word"> it created.</p>
                    <div class="explanation" id="exp9" style="display:none;"></div>
                </div>

                <div class="note-completion-item" id="q10">
                    <p>• Changes to rackets can be regarded as being as important as players' diets or the <input type="text" id="answer10" class="note-completion-input" placeholder="Enter word"> they do.</p>
                    <div class="explanation" id="exp10" style="display:none;"></div>
                </div>

                <div class="note-completion-item" id="q11">
                    <p>• All rackets used to have natural strings made from the <input type="text" id="answer11" class="note-completion-input" placeholder="Enter word"> of animals.</p>
                    <div class="explanation" id="exp11" style="display:none;"></div>
                </div>

                <div class="note-completion-item" id="q12">
                    <p>• Pete Sampras had metal <input type="text" id="answer12" class="note-completion-input" placeholder="Enter word"> put into the frames of his rackets.</p>
                    <div class="explanation" id="exp12" style="display:none;"></div>
                </div>

                <div class="note-completion-item" id="q13">
                    <p>• Gonçalo Oliveira changed the <input type="text" id="answer13" class="note-completion-input" placeholder="Enter word"> on his racket handles.</p>
                    <div class="explanation" id="exp13" style="display:none;"></div>
                </div>

                <button onclick="checkNoteCompletionAnswers(8, 13, 'passage1')">Check Answers (8-13)</button>
                <button onclick="resetNoteCompletionAnswers(8, 13)">Reset (8-13)</button>
            </div>

            <div id="questions-passage2" class="questions-group" style="display:none;">
                <h2>Questions 14-19</h2>
                <p>Reading Passage 2 has seven paragraphs, A-G.</p>
                <p>Which paragraph contains the following information?</p>
                <p>Write the correct letter, A-G, in boxes 14-19 on your answer sheet.</p>
                <p>NB You may use any letter more once.</p>

                <div class="question-item" id="q14">
                    <p>14. a reference to a denial of involvement in piracy</p>
                    <input type="text" id="answer14" placeholder="Enter letter (A-G)">
                    <div class="explanation" id="exp14" style="display:none;"></div>
                </div>

                <div class="question-item" id="q15">
                    <p>15. details of how a campaign to eradicate piracy was carried out</p>
                    <input type="text" id="answer15" placeholder="Enter letter (A-G)">
                    <div class="explanation" id="exp15" style="display:none;"></div>
                </div>

                <div class="question-item" id="q16">
                    <p>16. a mention of the circumstances in which states in the ancient world would make use of pirates</p>
                    <input type="text" id="answer16" placeholder="Enter letter (A-G)">
                    <div class="explanation" id="exp16" style="display:none;"></div>
                </div>

                <div class="question-item" id="q17">
                    <p>17. a reference to how people today commonly view pirates</p>
                    <input type="text" id="answer17" placeholder="Enter letter (A-G)">
                    <div class="explanation" id="exp17" style="display:none;"></div>
                </div>

                <div class="question-item" id="q18">
                    <p>18. an explanation of how some people were encouraged not to return to piracy</p>
                    <input type="text" id="answer18" placeholder="Enter letter (A-G)">
                    <div class="explanation" id="exp18" style="display:none;"></div>
                </div>

                <div class="question-item" id="q19">
                    <p>19. a mention of the need for many sailing vessels to stay relatively close to land</p>
                    <input type="text" id="answer19" placeholder="Enter letter (A-G)">
                    <div class="explanation" id="exp19" style="display:none;"></div>
                </div>
                <button onclick="checkMatchingHeadingAnswers(14, 19, 'passage2')">Check Answers (14-19)</button>
                <button onclick="resetMatchingHeadingAnswers(14, 19)">Reset (14-19)</button>

                <h2>Questions 20 and 21</h2>
                <p>Choose TWO letters, A-E.</p>
                <p>Write the correct letters in boxes 20 and 21 on your answer sheet.</p>
                <p>Which TWO of the following statements does the writer make about inhabitants of the Mediterranean region in the ancient world?</p>
                <div class="question-item" id="q20-21">
                    <div class="mcq-options">
                        <label><input type="checkbox" name="q20-21" value="A"> A They often used stolen vessels to carry out pirate attacks.</label>
                        <label><input type="checkbox" name="q20-21" value="B"> B They managed to escape capture by the authorities because they knew the area so well.</label>
                        <label><input type="checkbox" name="q20-21" value="C"> C They paid for information about the routes merchant ships would take.</label>
                        <label><input type="checkbox" name="q20-21" value="D"> D They depended more on the sea for their livelihood than on farming.</label>
                        <label><input type="checkbox" name="q20-21" value="E"> E They stored many of the goods taken in pirate attacks in coves along the coastline.</label>
                    </div>
                    <div class="explanation" id="exp20-21" style="display:none;"></div>
                </div>
                <button onclick="checkMCQTwoAnswers('q20-21', 'passage2', 'mcqTwo20_21')">Check Answers (20-21)</button>
                <button onclick="resetMCQTwoAnswers('q20-21')">Reset (20-21)</button>


                <h2>Questions 22 and 23</h2>
                <p>Choose TWO letters, A-E.</p>
                <p>Write the correct letters in boxes 22 and 23 on your answer sheet.</p>
                <p>Which TWO of the following statements does the writer make about piracy and ancient Greece?</p>
                <div class="question-item" id="q22-23">
                    <div class="mcq-options">
                        <label><input type="checkbox" name="q22-23" value="A"> A The state estimated that very few people were involved in piracy.</label>
                        <label><input type="checkbox" name="q22-23" value="B"> B Attitudes towards piracy changed shortly after the Iliad and the Odyssey were written.</label>
                        <label><input type="checkbox" name="q22-23" value="C"> C Important officials were known to occasionally take part in piracy.</label>
                        <label><input type="checkbox" name="q22-23" value="D"> D Every citizen regarded pirate attacks on cities as unacceptable.</label>
                        <label><input type="checkbox" name="q22-23" value="E"> E A favourable view of piracy is evident in certain ancient Greek texts.</label>
                    </div>
                    <div class="explanation" id="exp22-23" style="display:none;"></div>
                </div>
                <button onclick="checkMCQTwoAnswers('q22-23', 'passage2', 'mcqTwo22_23')">Check Answers (22-23)</button>
                <button onclick="resetMCQTwoAnswers('q22-23')">Reset (22-23)</button>


                <h2>Questions 24-26</h2>
                <p>Complete the summary below.</p>
                <p>Choose ONE WORD ONLY from the passage for each answer.</p>
                <p>Write your answers in boxes 24-26 on your answer sheet.</p>
                <h3>Ancient Rome and piracy</h3>
                <div class="note-completion-item">
                    <p>Piracy was an issue ancient Rome had to deal with, but it also brought some benefits for Rome. For example, pirates supplied slaves that were important for Rome's industries. However, attacks on vessels transporting <input type="text" id="answer24" class="note-completion-input" placeholder="Enter word"> to Rome resulted in calls for <input type="text" id="answer25" class="note-completion-input" placeholder="Enter word"> for the pirates responsible. Nevertheless, piracy continued, with some pirates demanding a <input type="text" id="answer26" class="note-completion-input" placeholder="Enter word"> for the return of the Roman officials they captured.</p>
                    <div class="explanation" id="exp24" style="display:none;"></div>
                    <div class="explanation" id="exp25" style="display:none;"></div>
                    <div class="explanation" id="exp26" style="display:none;"></div>
                </div>
                <button onclick="checkSummaryCompletionTwoQuestions(24, 26, 'passage2')">Check Answers (24, 26)</button>
                <button onclick="resetSummaryCompletionTwoQuestions(24, 26)">Reset (24-26)</button>
            </div>

            <div id="questions-passage3" class="questions-group" style="display:none;">
                <h2>Questions 27-30</h2>
                <p>Choose the correct letter, A, B, C or D.</p>
                <p>Write the correct letter in boxes 27-30 on your answer sheet.</p>
                <div class="question-item" id="q27">
                    <p>27. What point does the writer make about misinformation in the first paragraph?</p>
                    <div class="mcq-options">
                        <label><input type="radio" name="q27" value="A"> A Misinformation is a relatively recent phenomenon.</label>
                        <label><input type="radio" name="q27" value="B"> B Some people find it easy to identify misinformation.</label>
                        <label><input type="radio" name="q27" value="C"> C Misinformation changes as it is passed from one person to another.</label>
                        <label><input type="radio" name="q27" value="D"> D There may be a number of reasons for the spread of misinformation.</label>
                    </div>
                    <div class="explanation" id="exp27" style="display:none;"></div>
                </div>

                <div class="question-item" id="q28">
                    <p>28. What does the writer say about the role of technology?</p>
                    <div class="mcq-options">
                        <label><input type="radio" name="q28" value="A"> A It may at some point provide us with a solution to misinformation.</label>
                        <label><input type="radio" name="q28" value="B"> B It could fundamentally alter the way in which people regard information.</label>
                        <label><input type="radio" name="q28" value="C"> C It has changed the way in which organisations use misinformation.</label>
                        <label><input type="radio" name="q28" value="D"> D It has made it easier for people to check whether information is accurate.</label>
                    </div>
                    <div class="explanation" id="exp28" style="display:none;"></div>
                </div>

                <div class="question-item" id="q29">
                    <p>29. What is the writer doing in the fourth paragraph?</p>
                    <div class="mcq-options">
                        <label><input type="radio" name="q29" value="A"> A comparing the different opinions people have of misinformation</label>
                        <label><input type="radio" name="q29" value="B"> B explaining how the effects of misinformation have changed over time</label>
                        <label><input type="radio" name="q29" value="C"> C outlining which issues connected with misinformation are significant today</label>
                        <label><input type="radio" name="q29" value="D"> D describing the attitude of policy makers towards misinformation in the media</label>
                    </div>
                    <div class="explanation" id="exp29" style="display:none;"></div>
                </div>

                <div class="question-item" id="q30">
                    <p>30. What point does the writer make about regulation in the USA?</p>
                    <div class="mcq-options">
                        <label><input type="radio" name="q30" value="A"> A The guidelines issued by the FDA need to be simplified.</label>
                        <label><input type="radio" name="q30" value="B"> B Regulation does not affect people's opinions of new prescription drugs.</label>
                        <label><input type="radio" name="q30" value="C"> C The USA has more regulatory bodies than most other countries.</label>
                        <label><input type="radio" name="q30" value="D"> D Regulation fails to prevent misinformation from appearing in the media.</label>
                    </div>
                    <div class="explanation" id="exp30" style="display:none;"></div>
                </div>
                <button onclick="checkMCQSingleAnswers(27, 30, 'passage3')">Check Answers (27-30)</button>
                <button onclick="resetMCQSingleAnswers(27, 30)">Reset (27-30)</button>

                <h2>Questions 31-36</h2>
                <p>Complete the summary using the list of phrases, A-J, below.</p>
                <p>Write the correct letter, A-J, in boxes 31-36 on your answer sheet.</p>
                <h3>What happens when people encounter misinformation?</h3>
                <div class="note-completion-item">
                    <p>Although people have <select id="answer31" class="short-select">
                        <option value="">-</option>
                        <option value="A">A. constant conflict</option>
                        <option value="B">B. additional evidence</option>
                        <option value="C">C. different locations</option>
                        <option value="D">D. experimental subjects</option>
                        <option value="E">E. short period</option>
                        <option value="F">F. extreme distrust</option>
                        <option value="G">G. frequent exposure</option>
                        <option value="H">H. mental operation</option>
                        <option value="I">I. dubious reason</option>
                        <option value="J">J. different ideas</option>
                    </select> to misinformation, there is debate about precisely how and when we label something as true or untrue. The philosophers Descartes and Spinoza had <select id="answer32" class="short-select">
                        <option value="">-</option>
                        <option value="A">A. constant conflict</option>
                        <option value="B">B. additional evidence</option>
                        <option value="C">C. different locations</option>
                        <option value="D">D. experimental subjects</option>
                        <option value="E">E. short period</option>
                        <option value="F">F. extreme distrust</option>
                        <option value="G">G. frequent exposure</option>
                        <option value="H">H. mental operation</option>
                        <option value="I">I. dubious reason</option>
                        <option value="J">J. J. different ideas</option>
                    </select> about how people engage with information. While Descartes believed that people accept or reject information after considering whether it is true or not, Spinoza argued that people accepted all encountered information (and by default misinformation) and did not verify or reject it until afterwards. Moreover, Spinoza believed that a distinct <select id="answer33" class="short-select">
                        <option value="">-</option>
                        <option value="A">A. constant conflict</option>
                        <option value="B">B. additional evidence</option>
                        <option value="C">C. different locations</option>
                        <option value="D">D. experimental subjects</option>
                        <option value="E">E. short period</option>
                        <option value="F">F. extreme distrust</option>
                        <option value="G">G. frequent exposure</option>
                        <option value="H">H. mental operation</option>
                        <option value="I">I. dubious reason</option>
                        <option value="J">J. different ideas</option>
                    </select> is involved in these stages. Recent research has provided <select id="answer34" class="short-select">
                        <option value="">-</option>
                        <option value="A">A. constant conflict</option>
                        <option value="B">B. additional evidence</option>
                        <option value="C">C. different locations</option>
                        <option value="D">D. experimental subjects</option>
                        <option value="E">E. short period</option>
                        <option value="F">F. extreme distrust</option>
                        <option value="G">G. frequent exposure</option>
                        <option value="H">H. mental operation</option>
                        <option value="I">I. dubious reason</option>
                        <option value="J">J. different ideas</option>
                    </select> for Spinoza's theory and it would appear that people accept all encountered information as if it were true, even if this is for an extremely <select id="answer35" class="short-select">
                        <option value="">-</option>
                        <option value="A">A. constant conflict</option>
                        <option value="B">B. additional evidence</option>
                        <option value="C">C. different locations</option>
                        <option value="D">D. experimental subjects</option>
                        <option value="E">E. short period</option>
                        <option value="F">F. extreme distrust</option>
                        <option value="G">G. frequent exposure</option>
                        <option value="H">H. mental operation</option>
                        <option value="I">I. dubious reason</option>
                        <option value="J">J. different ideas</option>
                    </select>, and do not label the information as true or false until later. This is consistent with the fact that the resources for scepticism and the resources for perceiving and encoding are in <select id="answer36" class="short-select">
                        <option value="">-</option>
                        <option value="A">A. constant conflict</option>
                        <option value="B">B. additional evidence</option>
                        <option value="C">C. different locations</option>
                        <option value="D">D. experimental subjects</option>
                        <option value="E">E. short period</option>
                        <option value="F">F. extreme distrust</option>
                        <option value="G">G. frequent exposure</option>
                        <option value="H">H. mental operation</option>
                        <option value="I">I. dubious reason</option>
                        <option value="J">J. different ideas</option>
                    </select> in the brain.</p>
                    <div class="explanation" id="exp31" style="display:none;"></div>
                    <div class="explanation" id="exp32" style="display:none;"></div>
                    <div class="explanation" id="exp33" style="display:none;"></div>
                    <div class="explanation" id="exp34" style="display:none;"></div>
                    <div class="explanation" id="exp35" style="display:none;"></div>
                    <div class="explanation" id="exp36" style="display:none;"></div>
                </div>
                <button onclick="checkSummaryCompletionListAnswers(31, 36, 'passage3')">Check Answers (31-36)</button>
                <button onclick="resetSummaryCompletionListAnswers(31, 36)">Reset (31-36)</button>

                <h2>Questions 37-40</h2>
                <p>Do the following statements agree with the claims of the writer in Reading Passage 3?</p>
                <p>In boxes 37-40 on your answer sheet, write</p>
                <p><strong>YES</strong> if the statement agrees with the claims of the writer</p>
                <p><strong>NO</strong> if the statement contradicts the claims of the writer</p>
                <p><strong>NOT GIVEN</strong> if it is impossible to say what the writer thinks about this</p>

                <div class="question-item" id="q37">
                    <p>37. Campaigns designed to correct misinformation will fail to achieve their purpose if people are unable to understand them.</p>
                    <div class="tfng-buttons" id="tfng-buttons-37">
                        <button data-value="YES">YES</button>
                        <button data-value="NO">NO</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp37" style="display:none;"></div>
                </div>

                <div class="question-item" id="q38">
                    <p>38. Attempts to teach elementary school students about misinformation have been opposed.</p>
                    <div class="tfng-buttons" id="tfng-buttons-38">
                        <button data-value="YES">YES</button>
                        <button data-value="NO">NO</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp38" style="display:none;"></div>
                </div>

                <div class="question-item" id="q39">
                    <p>39. It may be possible to overcome the problem of misinformation in a relatively short period.</p>
                    <div class="tfng-buttons" id="tfng-buttons-39">
                        <button data-value="YES">YES</button>
                        <button data-value="NO">NO</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp39" style="display:none;"></div>
                </div>

                <div class="question-item" id="q40">
                    <p>40. The need to keep up with new information is hugely exaggerated in today's world.</p>
                    <div class="tfng-buttons" id="tfng-buttons-40">
                        <button data-value="YES">YES</button>
                        <button data-value="NO">NO</button>
                        <button data-value="NOT GIVEN">NOT GIVEN</button>
                    </div>
                    <div class="explanation" id="exp40" style="display:none;"></div>
                </div>
                <button onclick="checkYESNONGAnswers(37, 40, 'passage3')">Check Answers (37-40)</button>
                <button onclick="resetYESNONGAnswers(37, 40)">Reset (37-40)</button>
            </div>
        </div>
    </div>

    <!-- Timer Display -->
    <div id="reading-timer">00:00</div>

    <!-- Floating Tools for highlighting -->
    <div class="floating-tools">
        <button id="highlight-button" aria-label="Highlight text">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-highlighter"><path d="m9.06 11.9l8.07-8.06a2.85 2.85 0 1 1 4.04 4.04l-8.07 8.06"/><path d="M11.9 9.06l-1.01 1.01C9.11 11.9 7.02 14 6.07 14.93c-1.52 1.52-2.14 3.61-2.07 5.71 0.07 1.95 1.44 2.84 2.84 2.84 2.1 0 4.19-0.62 5.71-2.14 0.93-0.95 3.02-3.04 4.07-4.08l1.01-1.01"/></svg>
        </button>
        <button id="clear-highlights-button" aria-label="Clear Highlights">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eraser"><path d="M20.71 19.07a1 1 0 0 0 0 1.41l2.17 2.17a1 1 0 0 0 1.41 0.01 1 1 0 0 0 .01-1.41l-2.17-2.17a1 1 0 0 0-1.42 0z"/><path d="M18.66 11.83l2.83-2.83a2 2 0 0 0-2.83-2.83l-2.83 2.83"/><path d="M2 13.92l5.7-5.7 6.06 6.06-5.7 5.7L2 13.92z"/></svg>
        </button>
    </div>

    <!-- Modal for messages -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modalMessage"></p>
        </div>
    </div>

    <script>
        // Timer functionality
        let timerInterval;
        let seconds = 0;
        let minutes = 0;

        function startTimer() {
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            seconds++;
            if (seconds === 60) {
                minutes++;
                seconds = 0;
            }
            const formattedTime = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            document.getElementById('reading-timer').textContent = formattedTime;
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        // Resizer functionality
        const resizer = document.getElementById('resizer');
        const leftPane = document.getElementById('reading-passage-container');
        const rightPane = document.getElementById('questions-section');

        let isResizing = false;

        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.addEventListener('mousemove', resizePanes);
            document.addEventListener('mouseup', () => {
                isResizing = false;
                document.removeEventListener('mousemove', resizePanes);
            });
        });

        function resizePanes(e) {
            if (!isResizing) return;
            const containerWidth = document.querySelector('.container').offsetWidth;
            const newLeftWidth = (e.clientX / containerWidth) * 100;
            const newRightWidth = 100 - newLeftWidth;

            // Ensure minimum width for both panes
            if (newLeftWidth > 20 && newRightWidth > 20) {
                leftPane.style.width = `${newLeftWidth}%`;
                rightPane.style.width = `${newRightWidth}%`;
            }
        }

        // Highlight functionality
        let isHighlighting = false;
        const highlightButton = document.getElementById('highlight-button');
        const clearHighlightsButton = document.getElementById('clear-highlights-button'); // Corrected ID reference
        const readingPassageContainer = document.getElementById('reading-passage-container');

        highlightButton.addEventListener('click', () => {
            isHighlighting = !isHighlighting;
            highlightButton.style.backgroundColor = isHighlighting ? '#dc3545' : '#007bff'; // Red when active, Blue when inactive
        });

        clearHighlightsButton.addEventListener('click', () => {
            const highlightedSpans = readingPassageContainer.querySelectorAll('span.highlighted');
            highlightedSpans.forEach(span => {
                const parent = span.parentNode;
                while (span.firstChild) {
                    parent.insertBefore(span.firstChild, span);
                }
                parent.removeChild(span);
                parent.normalize(); // Combine adjacent text nodes
            });
            // Also reset highlighting state if it was active
            isHighlighting = false;
            highlightButton.style.backgroundColor = '#007bff';
        });

        readingPassageContainer.addEventListener('mouseup', () => {
            if (isHighlighting) {
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    if (readingPassageContainer.contains(range.commonAncestorContainer)) {
                        const span = document.createElement('span');
                        span.classList.add('highlighted');
                        try {
                            range.surroundContents(span);
                        } catch (e) {
                            // Handle cases where range cannot be surrounded (e.g., partial tags)
                            console.error("Could not surround content:", e);
                        }
                    }
                }
                selection.removeAllRanges(); // Clear selection after highlighting
            }
        });


        // Answers and explanations (nested for better organization)
        const allAnswers = {
            passage1: {
                tfng: {
                    answer1: { correct: 'FALSE', explanation: "The passage states that five years before 2016 (i.e., in 2011), Murray 'had been regarded as a talented outsider who entered but never won the major tournaments,' indicating people did not expect him to be world number one." },
                    answer2: { correct: 'FALSE', explanation: "Another change was so subtle as to pass more or less unnoticed." },
                    answer3: { correct: 'NOT GIVEN', explanation: "The passage mentions Colin Triplow as a stringer but not if most pros take them on tour." },
                    answer4: { correct: 'FALSE', explanation: "The rackets they use now weigh more than the average model" },
                    answer5: { correct: 'NOT GIVEN', explanation: "Werner Fischer started playing with the so-called spaghetti-strung racket. It created a string bed... It doesn't say he designed it himself." },
                    answer6: { correct: 'TRUE', explanation: "They will continually change it depending on various factors including the court surface, climatic conditions, and game styles." },
                    answer7: { correct: 'TRUE', explanation: "much of the serving power of US professional player Pete Sampras was attributed to the addition of four to five lead weights onto his rackets" }
                },
                noteCompletion: {
                    answer8: { correct: 'paint', explanation: "Mike and Bob Bryan made changes to the types of racket used on their racket frames." },
                    answer9: { correct: 'topspin', explanation: "Players were not allowed to use the spaghetti-strung racket because of the amount of topspin it created." },
                    answer10: { correct: 'training', explanation: "Today it is, in many ways, an aspect of the game that is equal in significance to nutrition or training." },
                    answer11: { correct: 'intestines', explanation: "At one time, all tennis rackets were strung with natural gut made from the outer layer of sheep or cow intestines." },
                    answer12: { correct: 'weights', explanation: "Pete Sampras was attributed to the addition of four to five lead weights onto his rackets" },
                    answer13: { correct: 'grips', explanation: "Gonçalo Oliveira changed the original grips of his rackets with something thinner" }
                }
            },
            passage2: {
                matchingHeading: {
                    answer14: { correct: 'D', explanation: "Paragraph D states: 'In the letters, the king of Alashiya (modern Cyprus) rejected Akhenaten's claims of a connection with the Lukka (based in modern-day Turkey).'" },
                    answer15: { correct: 'G', explanation: "Paragraph G details Pompey's campaign: 'Taking personal command, Pompey divided the entire Mediterranean into 13 districts, assigning a fleet and commander to each. After cleansing one district of pirates, the fleet would join another in the next district.'" },
                    answer16: { correct: 'C', explanation: "Paragraph C mentions: 'it was not unknown in the first and second millennia BCE for governments to resort to pirates' services, especially during wartime, employing their skills and numbers against their opponents.'" },
                    answer17: { correct: 'A', explanation: "Paragraph A begins: 'When one mentions pirates, an image springs to most people's minds of a crew of misfits, daredevils and adventurers in command of a tall sailing ship in the Caribbean Sea.'" },
                    answer18: { correct: 'G', explanation: "Paragraph G explains: 'many more were offered land in fertile areas located far from the sea. Instead of a maritime menace, Rome got productive farmers that further boosted its economy.'" },
                    answer19: { correct: 'B', explanation: "Paragraph B states: 'Before the invention of ocean-going caravels* in the 15th century, ships could not easily cross long distances over open water. Thus, in the ancient world most were restricted to a few wellknown navigable routes that followed the coastline.'" }
                },
                mcqTwo20_21: { correct: ['B', 'D'], explanation: "Statement B is supported by Paragraph B: 'knowledge of the local area helped the pirates to avoid retaliation once a state fleet arrived.' Statement D is supported by Paragraph B: 'In the ancient times, the inhabitants of these areas relied heavily on marine resources, including fish and salt.'" },
                mcqTwo22_23: { correct: ['C', 'E'], explanation: "Statement C is supported by Paragraph E: 'Even high-ranking members of the state were not beyond engaging in such activities.' Statement E is supported by Paragraph E: 'in his works the Iliad and the Odyssey, the ancient Greek writer Homer not only condones, but praises the lifestyle and actions of pirates.'" },
                summaryCompletion: {
                    answer24: { correct: 'grain', explanation: "Paragraph F states: 'Pirate attacks on grain ships, which were essential to Roman citizens, led to angry voices in the Senate, demanding punishment of the culprits.'" },
                    answer25: { correct: 'punishment', explanation: "Paragraph F states: 'Pirate attacks on grain ships, which were essential to Roman citizens, led to angry voices in the Senate, demanding punishment of the culprits.'" },
                    answer26: { correct: 'ransom', explanation: "Paragraph F states: 'By the 1st century BCE, emboldened pirates kidnapped prominent Roman dignitaries, asking for a large ransom to be paid.'" }
                }
            },
            passage3: {
                mcq: {
                    answer27: { correct: 'D', explanation: "The first paragraph discusses various reasons for misinformation, including strategic advantage, motivating others, and protecting interpersonal bonds, aligning with option D." },
                    answer28: { correct: 'A', explanation: "The second paragraph states: 'Yet the means to correct misinformation might, over time, be found in those same patterns of mass communication and of the facilitated spread of information,' supporting option A." },
                    answer29: { correct: 'C', explanation: "The fourth paragraph explicitly states: 'At least three observations related to misinformation in the contemporary mass-media environment warrant the attention of researchers, policy makers, and really everyone who watches television, listens to the radio, or reads information online.' This outlines significant issues." },
                    answer30: { correct: 'D', explanation: "The passage in the sixth paragraph states: 'Such programs, although laudable and useful, do not keep false advertising off the airwaves,' which means regulation fails to prevent misinformation from appearing." }
                },
                summaryList: {
                    answer31: { correct: 'G', explanation: "The passage mentions 'Although it is fairly routine for individuals to come across information that is false,' which implies frequent exposure to misinformation." },
                    answer32: { correct: 'J', explanation: "The passage states: 'The dilemma is neatly summarized by a contrast between how the 17th-century philosophers René Descartes and Baruch Spinoza described human information engagement, with conflicting predictions that only recently have been empirically tested in robust ways.' This indicates they had 'different ideas'." },
                    answer33: { correct: 'H', explanation: "The passage says: 'Moreover, Spinoza believed that a distinct mental operation is involved in these stages.'" },
                    answer34: { correct: 'B', explanation: "The passage states: 'In recent decades, empirical evidence... has supported Spinoza's account,' which means 'additional evidence'." },
                    answer35: { correct: 'E', explanation: "The passage notes: 'people appear to encode all new information as if it were true, even if only momentarily, and later tag the information as being either true or false, a pattern that seems consistent with the observation that mental resources for skepticism physically reside in a different part of the brain than the resources used in perceiving and encoding.' The 'momentarily' suggests a 'short period'." },
                    answer36: { correct: 'C', explanation: "The passage explicitly states: 'the resources for scepticism and the resources for perceiving and encoding are in different locations in the brain.'" }
                },
                yesNoNg: {
                    answer37: { correct: 'YES', explanation: "Paragraph 7 states: 'For corrective campaigns to be persuasive, audiences need to be able to comprehend them, which requires either effort to frame messages in ways that are accessible or effort to educate and sensitize audiences to the possibility of misinformation.' This agrees with the statement." },
                    answer38: { correct: 'NOT GIVEN', explanation: "The passage suggests 'the utility of media literacy efforts as early as elementary school' but does not mention any opposition to such attempts." },
                    answer39: { correct: 'NO', explanation: "The last paragraph states: 'The journey forward undoubtedly will be a long and arduous one.' and 'To overcome the worst effects of the phenomenon, we will need coordinated efforts over time, rather than any singular one-time panacea we could hope to offer.' This contradicts the idea of overcoming it in a relatively short period." },
                    answer40: { correct: 'NOT GIVEN', explanation: "The passage does not discuss whether the need to keep up with new information is exaggerated; it focuses on the spread and correction of misinformation." }
                }
            }
        };

        // Modal functions
        function showMessage(message) {
            const modal = document.getElementById('messageModal');
            const modalMessage = document.getElementById('modalMessage');
            modalMessage.textContent = message;
            modal.style.display = 'block';
        }

        function hideMessage() {
            const modal = document.getElementById('messageModal');
            modal.style.display = 'none';
        }

        // Function to handle TFNG button clicks
        function handleTFNGOptionClick(event) {
            const clickedButton = event.target;
            const parentDiv = clickedButton.closest('.tfng-buttons');
            // Remove 'selected' class from all buttons in this group
            Array.from(parentDiv.children).forEach(button => {
                button.classList.remove('selected');
            });
            // Add 'selected' class to the clicked button
            clickedButton.classList.add('selected');
        }

        // Show/Hide passage sections based on navigation
        function showPassage(passageNumber) {
            // Hide all passage content and question groups
            document.querySelectorAll('.passage-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.questions-group').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.nav-button').forEach(el => el.classList.remove('selected'));

            // Show selected passage content and question group
            document.getElementById(`passage${passageNumber}-content`).style.display = 'block';
            document.getElementById(`questions-passage${passageNumber}`).style.display = 'block';
            document.getElementById(`nav-passage${passageNumber}`).classList.add('selected');

            hideMessage(); // Clear any existing messages
        }

        // Generic check functions
        function checkTFNGAswers(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const tfngButtonsDiv = document.getElementById(`tfng-buttons-${i}`);
                const selectedButton = tfngButtonsDiv.querySelector('.selected');
                const explanationDiv = document.getElementById(`exp${i}`);

                if (!selectedButton) {
                    allAnswered = false;
                    break;
                }

                const userAnswer = selectedButton.dataset.value;
                const correctAnswerObj = allAnswers[passageKey].tfng[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct;
                const explanation = correctAnswerObj.explanation;

                explanationDiv.style.display = 'block';
                explanationDiv.textContent = `Correct Answer: ${correctAnswer}. ${explanation}`;

                if (userAnswer === correctAnswer) {
                    explanationDiv.classList.remove('incorrect-answer');
                    explanationDiv.classList.add('correct-answer');
                    correctCount++;
                } else {
                    explanationDiv.classList.remove('correct-answer');
                    explanationDiv.classList.add('incorrect-answer');
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`Questions ${startQ}-${endQ}: You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetTFNGAswers(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const tfngButtonsDiv = document.getElementById(`tfng-buttons-${i}`);
                Array.from(tfngButtonsDiv.children).forEach(button => {
                    button.classList.remove('selected');
                });
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }

        function checkNoteCompletionAnswers(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                const explanationDiv = document.getElementById(`exp${i}`);
                const userAnswer = inputElement.value.trim().toLowerCase();
                const correctAnswerObj = allAnswers[passageKey].noteCompletion[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct.toLowerCase();
                const explanation = correctAnswerObj.explanation;

                if (inputElement && userAnswer === '') {
                    allAnswered = false;
                    break;
                }

                if (explanationDiv) {
                    explanationDiv.style.display = 'block';
                    explanationDiv.textContent = `Correct Answer: ${correctAnswerObj.correct}. ${explanation}`;

                    if (userAnswer === correctAnswer) {
                        explanationDiv.classList.remove('incorrect-answer');
                        explanationDiv.classList.add('correct-answer');
                        correctCount++;
                    } else {
                        explanationDiv.classList.remove('correct-answer');
                        explanationDiv.classList.add('incorrect-answer');
                    }
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`Questions ${startQ}-${endQ}: You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetNoteCompletionAnswers(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                if (inputElement) {
                    inputElement.value = '';
                }
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }

        function checkMatchingHeadingAnswers(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                const explanationDiv = document.getElementById(`exp${i}`);
                const userAnswer = inputElement.value.trim().toUpperCase();
                const correctAnswerObj = allAnswers[passageKey].matchingHeading[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct.toUpperCase();
                const explanation = correctAnswerObj.explanation;

                if (inputElement && userAnswer === '') {
                    allAnswered = false;
                    break;
                }

                if (explanationDiv) {
                    explanationDiv.style.display = 'block';
                    explanationDiv.textContent = `Correct Answer: ${correctAnswerObj.correct}. ${explanation}`;

                    if (userAnswer === correctAnswer) {
                        explanationDiv.classList.remove('incorrect-answer');
                        explanationDiv.classList.add('correct-answer');
                        correctCount++;
                    } else {
                        explanationDiv.classList.remove('correct-answer');
                        explanationDiv.classList.add('incorrect-answer');
                    }
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`Questions ${startQ}-${endQ}: You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetMatchingHeadingAnswers(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                if (inputElement) {
                    inputElement.value = '';
                }
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }


        function checkMCQTwoAnswers(questionId, passageKey, answerKey) {
            console.log(`--- Checking MCQ Two Answers for ${questionId} ---`);
            const questionItemDiv = document.getElementById(questionId);
            if (!questionItemDiv) {
                console.error(`Error: Question item div with ID '${questionId}' not found.`);
                showMessage(`An internal error occurred. Please try again.`);
                return;
            }
            console.log(`Question item div found:`, questionItemDiv);

            const checkboxes = questionItemDiv.querySelectorAll('.mcq-options input[type="checkbox"]:checked');
            // Corrected line: removed 'q' prefix when getting explanationDiv ID
            const explanationDiv = document.getElementById(`exp${questionId.replace('q', '')}`);
            const userAnswers = Array.from(checkboxes).map(cb => cb.value).sort();
            
            console.log(`Checked checkboxes:`, checkboxes);
            console.log(`User selected answers:`, userAnswers);

            const correctAnswerObj = allAnswers[passageKey][answerKey];
            if (!correctAnswerObj) {
                console.error(`Error: Correct answers object not found for passageKey: ${passageKey}, answerKey: ${answerKey}`);
                showMessage(`An internal error occurred: Answers not configured.`);
                return;
            }
            const correctAnswersArray = correctAnswerObj.correct.sort();
            const explanation = correctAnswerObj.explanation;

            console.log(`Correct answers:`, correctAnswersArray);
            console.log(`Explanation Div:`, explanationDiv);

            if (userAnswers.length === 0) {
                showMessage(`Please select two options for Questions ${questionId.replace('q', '')} before checking.`);
                console.log(`Message shown: Please select two options.`);
                return;
            } else if (userAnswers.length !== 2) {
                showMessage(`Please select exactly two options for Questions ${questionId.replace('q', '')}.`);
                console.log(`Message shown: Please select exactly two options.`);
                return;
            }

            if (explanationDiv) {
                explanationDiv.style.display = 'block'; // Make sure it's visible
                console.log(`Explanation Div display set to block. Current display:`, explanationDiv.style.display);
                explanationDiv.textContent = `Correct Answers: ${correctAnswersArray.join(', ')}. ${explanation}`;
                console.log(`Explanation Div textContent set.`);

                const isCorrect = userAnswers.every(val => correctAnswersArray.includes(val)) && userAnswers.length === correctAnswersArray.length;
                console.log(`Is Correct: ${isCorrect}`);

                if (isCorrect) {
                    explanationDiv.classList.remove('incorrect-answer');
                    explanationDiv.classList.add('correct-answer');
                    console.log(`Added 'correct-answer' class.`);
                    showMessage(`Multiple Choice (${questionId.replace('q', '')}): Correct!`);
                    console.log(`Message shown: Correct!`);
                } else {
                    explanationDiv.classList.remove('correct-answer');
                    explanationDiv.classList.add('incorrect-answer');
                    console.log(`Added 'incorrect-answer' class.`);
                    showMessage(`Multiple Choice (${questionId.replace('q', '')}): Incorrect.`);
                    console.log(`Message shown: Incorrect.`);
                }
            } else {
                console.warn(`Warning: Explanation Div with ID 'exp${questionId.replace('q', '')}' not found.`);
            }
            console.log(`--- End Checking MCQ Two Answers for ${questionId} ---`);
        }

        function resetMCQTwoAnswers(questionId) {
            const checkboxes = document.querySelectorAll(`#${questionId} .mcq-options input[type="checkbox"]`);
            checkboxes.forEach(cb => cb.checked = false);
            // Corrected line: removed 'q' prefix when getting explanationDiv ID
            const explanationDiv = document.getElementById(`exp${questionId.replace('q', '')}`);
            if (explanationDiv) {
                explanationDiv.style.display = 'none';
                explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
            }
            hideMessage();
        }

        function checkSummaryCompletionTwoQuestions(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                const explanationDiv = document.getElementById(`exp${i}`);
                const userAnswer = inputElement.value.trim().toLowerCase();
                const correctAnswerObj = allAnswers[passageKey].summaryCompletion[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct.toLowerCase();
                const explanation = correctAnswerObj.explanation;

                if (inputElement && userAnswer === '') {
                    allAnswered = false;
                    break;
                }

                if (explanationDiv) {
                    explanationDiv.style.display = 'block';
                    explanationDiv.textContent = `Correct Answer: ${correctAnswerObj.correct}. ${explanation}`;

                    if (userAnswer === correctAnswer) {
                        explanationDiv.classList.remove('incorrect-answer');
                        explanationDiv.classList.add('correct-answer');
                        correctCount++;
                    } else {
                        explanationDiv.classList.remove('correct-answer');
                        explanationDiv.classList.add('incorrect-answer');
                    }
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`Questions ${startQ}-${endQ}: You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetSummaryCompletionTwoQuestions(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                if (inputElement) {
                    inputElement.value = '';
                }
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }

        function checkMCQSingleAnswers(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const radioButtons = document.querySelectorAll(`#q${i} input[type="radio"]`);
                const selectedOption = Array.from(radioButtons).find(radio => radio.checked);
                const explanationDiv = document.getElementById(`exp${i}`);

                if (!selectedOption) {
                    allAnswered = false;
                    break;
                }

                const userAnswer = selectedOption.value;
                const correctAnswerObj = allAnswers[passageKey].mcq[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct;
                const explanation = correctAnswerObj.explanation;

                if (explanationDiv) {
                    explanationDiv.style.display = 'block';
                    explanationDiv.textContent = `Correct Answer: ${correctAnswer}. ${explanation}`;

                    if (userAnswer === correctAnswer) {
                        explanationDiv.classList.remove('incorrect-answer');
                        explanationDiv.classList.add('correct-answer');
                        correctCount++;
                    } else {
                        explanationDiv.classList.remove('correct-answer');
                        explanationDiv.classList.add('incorrect-answer');
                    }
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`Multiple Choice Questions (${startQ}-${endQ}): You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetMCQSingleAnswers(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const radioButtons = document.querySelectorAll(`#q${i} input[type="radio"]`);
                radioButtons.forEach(radio => radio.checked = false);
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }

        function checkSummaryCompletionListAnswers(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                const explanationDiv = document.getElementById(`exp${i}`);
                const userAnswer = inputElement.value.trim().toUpperCase();
                // We're expecting the value of the select option to be just the letter (e.g., "A", "B")
                const correctAnswerObj = allAnswers[passageKey].summaryList[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct.toUpperCase();
                const explanation = correctAnswerObj.explanation;

                if (inputElement && userAnswer === '') {
                    allAnswered = false;
                    break;
                }

                if (explanationDiv) {
                    explanationDiv.style.display = 'block';
                    explanationDiv.textContent = `Correct Answer: ${correctAnswerObj.correct}. ${explanation}`;

                    if (userAnswer === correctAnswer) {
                        explanationDiv.classList.remove('incorrect-answer');
                        explanationDiv.classList.add('correct-answer');
                        correctCount++;
                    } else {
                        explanationDiv.classList.remove('correct-answer');
                        explanationDiv.classList.add('incorrect-answer');
                    }
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`Summary Completion (List of Phrases) Questions (${startQ}-${endQ}): You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetSummaryCompletionListAnswers(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const inputElement = document.getElementById(`answer${i}`);
                if (inputElement) {
                    inputElement.value = ''; // Reset dropdown to initial empty option
                }
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }

        function checkYESNONGAnswers(startQ, endQ, passageKey) {
            let correctCount = 0;
            const totalQuestions = endQ - startQ + 1;
            let allAnswered = true;

            for (let i = startQ; i <= endQ; i++) {
                const tfngButtonsDiv = document.getElementById(`tfng-buttons-${i}`);
                const selectedButton = tfngButtonsDiv.querySelector('.selected');
                const explanationDiv = document.getElementById(`exp${i}`);

                if (!selectedButton) {
                    allAnswered = false;
                    break;
                }

                const userAnswer = selectedButton.dataset.value;
                const correctAnswerObj = allAnswers[passageKey].yesNoNg[`answer${i}`];
                const correctAnswer = correctAnswerObj.correct;
                const explanation = correctAnswerObj.explanation;

                if (explanationDiv) {
                    explanationDiv.style.display = 'block';
                    explanationDiv.textContent = `Correct Answer: ${correctAnswer}. ${explanation}`;

                    if (userAnswer === correctAnswer) {
                        explanationDiv.classList.remove('incorrect-answer');
                        explanationDiv.classList.add('correct-answer');
                        correctCount++;
                    } else {
                        explanationDiv.classList.remove('correct-answer');
                        explanationDiv.classList.add('incorrect-answer');
                    }
                }
            }

            if (!allAnswered) {
                showMessage(`Please answer all questions in this section (${startQ}-${endQ}) before checking.`);
                return;
            }
            showMessage(`YES/NO/NOT GIVEN Questions (${startQ}-${endQ}): You got ${correctCount} out of ${totalQuestions} questions correct!`);
        }

        function resetYESNONGAnswers(startQ, endQ) {
            for (let i = startQ; i <= endQ; i++) {
                const tfngButtonsDiv = document.getElementById(`tfng-buttons-${i}`);
                Array.from(tfngButtonsDiv.children).forEach(button => {
                    button.classList.remove('selected');
                });
                const explanationDiv = document.getElementById(`exp${i}`);
                if (explanationDiv) {
                    explanationDiv.style.display = 'none';
                    explanationDiv.classList.remove('correct-answer', 'incorrect-answer');
                }
            }
            hideMessage();
        }

        // Event listeners for navigation buttons on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('nav-passage1').addEventListener('click', () => showPassage(1));
            document.getElementById('nav-passage2').addEventListener('click', () => showPassage(2));
            document.getElementById('nav-passage3').addEventListener('click', () => showPassage(3));

            // Add event listeners to TFNG buttons for all relevant questions
            for (let i = 1; i <= 7; i++) {
                const tfngButtonsDiv = document.getElementById(`tfng-buttons-${i}`);
                if (tfngButtonsDiv) {
                    Array.from(tfngButtonsDiv.children).forEach(button => {
                        button.addEventListener('click', handleTFNGOptionClick);
                    });
                }
            }
            for (let i = 37; i <= 40; i++) {
                const tfngButtonsDiv = document.getElementById(`tfng-buttons-${i}`);
                if (tfngButtonsDiv) {
                    Array.from(tfngButtonsDiv.children).forEach(button => {
                        button.addEventListener('click', handleTFNGOptionClick);
                    });
                }
            }

            // Initial display
            showPassage(1); // Show Passage 1 by default
            
            // Attach close button listener here to ensure the element exists
            const closeButton = document.querySelector('.close-button');
            if (closeButton) {
                closeButton.addEventListener('click', hideMessage);
            }
        });

        // This will be called once Lucide is loaded and ready
        window.onload = function() {
            lucide.createIcons(); // Initialize Lucide icons
            startTimer(); // Start the timer once the page and icons are loaded
        }
    </script>
</body>
</html>
